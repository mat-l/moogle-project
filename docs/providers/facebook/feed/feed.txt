Friday 2014.05.02 11:20:13

FEED

1. INTRO
2. URL
3. WHAT TO STORE
4. ISSUES
    4.1. POST EDITS
APPENDIX A. POST URL




1. INTRO
========
The set of items I can see in my wall at https://www.facebook.com/puntonim
They can be my statuses or messages that a friend posted on my wall, or photos/videos I posted or linked or links in
general that I posted.
A feed query:
https://developers.facebook.com/docs/graph-api/reference/v2.0/user/feed/
Returns post objects:
https://developers.facebook.com/docs/graph-api/reference/v2.0/post
In the API statuses feeds are in the stream table
https://developers.facebook.com/docs/reference/fql/stream/



2. URL
======
(GET) /v2.0/me/feed


3. WHAT TO STORE
================
We are dealing with posts: https://developers.facebook.com/docs/graph-api/reference/v2.0/post
They can be of 4 types: link, status, photo, video

*id
*from
*type -- enum{link, status, photo, video}
status_type -- enum{mobile_status_update, created_note, added_photos, added_video, shared_story, created_group, created_event, wall_post, app_created_story, published_story, tagged_in_photo, approved_friend}
story -- Only for some events. Text from stories not intentionally generated by users, such as those generated when two people become friends, or when someone else posts on the person's wall
*created_time
*updated_time
*message
message_tags
place -- Can be emtpy
privacy
shares -- # times it was shared, can be empty
name -- for links, photo
caption -- for links, photo
description -- for links
picture -- for links, photo, video
link -- for links, photo, video
object_id -- id of uploaded photo or video
properties -- properties for video (like length), photo
source -- url to flash video
likes -- note: pagination with cursor
    id
    name
comments -- note: pagination with cursor
    from
    created_time
    message
    like_count



4. ISSUES
=========
4.1. POST EDITS
---------------
The way we get updates from Facebook is using the `since` parameter.
Docs: https://developers.facebook.com/docs/graph-api/using-graph-api/v2.0#paging
Example: https://graph.facebook.com/v2.0/me/feed?since=1398960876
This `since` parameter is a filter on the filed `created_time` and not `updated_time`.
`created_time` is the date of first creation of a post and it doesn't change when a post is edited, commented or liked.
`updated_time` is the date of the last edit, comment or like on a post.
So if I edit/delete/comment/like an old post, it doesn't show up in the way we get updates from Facebook.

For this reason I decided not to collect comments and likes.

Possible solutions:
- crawl every time the entire facebook history: stupid solution.
- crawl one time the entire facebook history, then use real-time updates:
https://developers.facebook.com/docs/graph-api/real-time-updates/v2.0
What if my server is not online? What if my server is too slow?
- use FQL to make a sql-like query to get the latest updates and then use Graph API to get the details of the updated objects?



APPENDIX A. POST URL
====================
Build it using the id:
https://www.facebook.com/puntonim/posts/10204097240900953